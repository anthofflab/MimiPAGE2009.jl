<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Model Validation · mimi-page-2009.jl</title><link href="https://cdnjs.cloudflare.com/ajax/libs/normalize/4.2.0/normalize.min.css" rel="stylesheet" type="text/css"/><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.2.0/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link href="../assets/documenter.css" rel="stylesheet" type="text/css"/></head><body><nav class="toc"><h1>mimi-page-2009.jl</h1><select id="version-selector" onChange="window.location.href=this.value" style="visibility: hidden"></select><form class="search" id="search-form" action="../search/"><input id="search-query" name="q" type="text" placeholder="Search docs"/></form><ul><li><a class="toctext" href="../">Home</a></li><li><a class="toctext" href="../gettingstarted/">Getting started</a></li><li><a class="toctext" href="../model-structure/">Model Structure</a></li><li><a class="toctext" href="../technicaluserguide/">Technical User Guide</a></li><li class="current"><a class="toctext" href>Model Validation</a><ul class="internal"><li><a class="toctext" href="#Folder-Structure-1">Folder Structure</a></li><li><a class="toctext" href="#Deterministic-validations-1">Deterministic validations</a></li><li><a class="toctext" href="#Probabilistic-validation-1">Probabilistic validation</a></li></ul></li></ul></nav><article id="docs"><header><nav><ul><li><a href>Model Validation</a></li></ul><a class="edit-page" href="https://github.com/anthofflab/mimi-page-2009.jl/blob/master/docs/src/validation.md"><span class="fa"></span> Edit on GitHub</a></nav><hr/><div id="topbar"><span>Model Validation</span><a class="fa fa-bars" href="#"></a></div></header><h1><a class="nav-anchor" id="Validation-1" href="#Validation-1">Validation</a></h1><p>This guide briefly explains how Mimi PAGE results were validated against PAGE 2009 outputs.</p><p>Validations were performed for both the deterministic and probabilistic versions of the model. For the deterministic version of the model, both individual components and final outputs were validated. For the probabilistic version of the model, final outputs were validated.</p><h2><a class="nav-anchor" id="Folder-Structure-1" href="#Folder-Structure-1">Folder Structure</a></h2><p>Relevant tests and data are saved in the &#39;test&#39; folder. The folders are organized as follows.</p><p><strong>test</strong></p><p>Contains separate unit tests for the deterministic version of each of the individual model components.</p><p><strong>test/validationdata</strong></p><p>We obtained PAGE 2009 values from the Excel version of PAGE 2009, provided by Chris Hope (personal communication).</p><p>Running the Excel version of PAGE 2009 requires the @RISK 7.5 Industial software (available at http://go.palisade.com/RISKDownload.html), which facilitates probabilistic modeling in Excel. Free 15-day trials of the software are available</p><p>In order to perform tests of individual components, known values were extracted from PAGE &#39;09 or the PAGE written documentation. Where they were obtained from PAGE 2009, values were exported with full precision using a separate extraction tool. (Key values are saved in the <code>validationdata</code> folder within the <code>test</code> folder.) Truncating precision can lead to compounding errors which will cause Mimi PAGE results to diverge from PAGE 2009.</p><h2><a class="nav-anchor" id="Deterministic-validations-1" href="#Deterministic-validations-1">Deterministic validations</a></h2><p>For each individual Mimi PAGE component, we tested the component with known input data and compared output with values from PAGE 2009. Nearly all values matched within 1%.</p><p>As an example of how a test file works, consider <code>test/test_CO2emissions</code>, which serves as a test for the <code>src/components/CO2emissions.jl</code> file.</p><p>First, we initialize the model and reference the relevant files (<code>src/utils/load_paramaters.jl</code> and, notably, <code>src/components/CO2emissions.jl</code>). Then we add the <code>CO2emissions</code> component to our model <code>m</code>.</p><pre><code class="language-none">using Mimi
using Test

include(&quot;../src/utils/load_parameters.jl&quot;)
include(&quot;../src/components/CO2emissions.jl&quot;)

m = Model()
set_dimension!(m, :time, [2009, 2010, 2020, 2030, 2040, 2050, 2075, 2100, 2150, 2200])
set_dimension!(m, :region, [&quot;EU&quot;, &quot;USA&quot;, &quot;OECD&quot;,&quot;USSR&quot;,&quot;China&quot;,&quot;SEAsia&quot;,&quot;Africa&quot;,&quot;LatAmerica&quot;])

add_comp!(m, co2emissions)</code></pre><p>Then we set the component inputs (baseline emissions and CO2 emissions growth) using exogenous values from PAGE 2009, which are saved in the data folder.</p><pre><code class="language-none">set_param!(m, :co2emissions, :e0_baselineCO2emissions, readpagedata(m, &quot;data/e0_baselineCO2emissions.csv&quot;))
set_param!(m, :co2emissions, :er_CO2emissionsgrowth, readpagedata(m, &quot;data/er_CO2emissionsgrowth.csv&quot;))</code></pre><p>Then we run our model, save the output to the <code>emissions</code> variable. We then load exogenous PAGE 2009 data on emissions into the <code>emissions_compare</code> variable. We test to see if the output from our model matches that from PAGE within 1e-3 precision (it does).</p><pre><code class="language-none">##running Model
run(m)

emissions = m[:co2emissions,  :e_regionalCO2emissions]

# Recorded data
emissions_compare = readpagedata(m, &quot;test/validationdata/e_regionalCO2emissions.csv&quot;)

@test emissions ≈ emissions_compare rtol=1e-3
</code></pre><p>The graph below shows the output from both PAGE 2009 and Mimi PAGE.</p><p><img src="../assets/co2graph.png" alt="CO2graph"/></p><h2><a class="nav-anchor" id="Probabilistic-validation-1" href="#Probabilistic-validation-1">Probabilistic validation</a></h2><p>For the probabilistic version of the model, we graphed and compared distributions of total damages, total preventative costs, total adaptation costs, and total effects.  Differences between quantiles of the distribution for 4 model end-point variables are shown in the graph below. Error bars show the 95% confidence interval associated with sampling uncertainty.</p><p>Distributions matched closely (&lt;1.5% difference) for all outputs, based on 100,000 runs.</p><p><img src="../assets/MC-validation.png" alt="MC-validation.JPG"/></p><footer><hr/><a class="previous" href="../technicaluserguide/"><span class="direction">Previous</span><span class="title">Technical User Guide</span></a></footer></article></body></html>
